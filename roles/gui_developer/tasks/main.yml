- name: 'Permit X'
  lineinfile: dest=/etc/X11/Xwrapper.config regexp='allowed_users=' line='allowed_useres=anybody'
  sudo: true

- name: 'Synapse: Add PPA'
  apt_repository: repo='ppa:synapse-core/testing'
  sudo: true

- name: 'Synapse: Install'
  apt: name={{ item }} state=present update_cache=yes
  sudo: true
  with_items:
    - synapse

- name: 'Numix: Add PPA'
  apt_repository: repo='ppa:numix/ppa'
  sudo: true

- name: 'Numix: Install'
  apt: name={{ item }} state=present update_cache=yes
  sudo: true
  with_items:
    - numix-gtk-theme
    - numix-icon-theme
    - numix-icon-theme-circle
    - numix-plymouth-theme

- name: 'Other: Install'
  apt: name={{ item }} state=present update_cache=yes
  sudo: true
  with_items:
  - xorg
  - slim
  - xscreensaver
  - clipit
  - xscreensaver-screensaver-bsod
  - pcmanfm
  - roxterm
  - openbox
  - fbpanel
  - lxappearance
  - lxappearance-obconf

- name: "Insure ~/.config exists"
  file: dest=~/.config state=directory

- name: "~/ dot files"
  file: force=yes src={{ gui_developer.files }}/{{ item }} dest=~/.{{ item }} state=link
  with_items:
  - xprofile
  - x_scripts

- name: "~/.config dot files"
  file: force=yes src={{ gui_developer.files }}/config/{{ item }} dest=~/.config/{{ item }} state=link
  with_items:
  - openbox
  - fbpanel
  - terminator

# - name: "restart X"
#   service: name=lxdm state=restarted
#   sudo: true

- name: 'Allow suspend for admin user'
  lineinfile: line="%plugdev admin=NOPASSWD:/usr/sbin/pm-suspend" state=present validate='visudo -cf %s' dest=/etc/sudoers
  sudo: true
