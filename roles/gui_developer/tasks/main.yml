- name: 'Disable annoying apport harassment'
  lineinfile: dest=/etc/default/apport regexp='enabled=' line='enabled=0'
  sudo: true

- name: 'Permit X'
  lineinfile: dest=/etc/X11/Xwrapper.config regexp='allowed_users=' line='allowed_users=anybody'
  sudo: true

- user: name="{{ lookup('env','USER') }}" group={{ item }}
  with_items:
    - plugdev
    - netdev

- name: 'Synapse: Add PPA'
  apt_repository: repo='ppa:synapse-core/testing'
  sudo: true

- name: 'Synapse: Install'
  apt: name={{ item }} state=present update_cache=yes
  sudo: true
  with_items:
    - synapse

- name: 'Numix: Add PPA'
  apt_repository: repo='ppa:numix/ppa'
  sudo: true

- name: 'Numix: Install'
  apt: name={{ item }} state=present update_cache=yes
  sudo: true
  with_items:
    - numix-gtk-theme
    - numix-icon-theme
    - numix-icon-theme-circle
    - numix-plymouth-theme

- name: 'Other: Install'
  apt: name={{ item }} state=present update_cache=yes
  sudo: true
  with_items:
  - xorg
  - slim
  - xscreensaver
  - clipit
  - xscreensaver-screensaver-bsod
  - pcmanfm
  - roxterm
  - openbox
  - fbpanel
  - lxappearance
  - lxappearance-obconf

- name: "rxvt-unicode: plugins"
  git: repo=git@github.com:muennich/urxvt-perls.git dest=~/.urxvt/ext

- name: "Insure ~/.config exists"
  file: dest=~/.config state=directory

- name: "~/ dot files"
  file: force=yes src={{ gui_developer.files }}/{{ item }} dest=~/.{{ item }} state=link
  with_items:
  - xprofile
  - x_scripts

- name: "~/.config dot files"
  file: force=yes src={{ gui_developer.files }}/config/{{ item }} dest=~/.config/{{ item }} state=link
  with_items:
  - openbox
  - fbpanel
  - terminator

- name: "Default Terminal Emulator"
  shell: update-alternatives --set x-terminal-emulator /usr/bin/urxvt
  sudo: true

- name: "Default Web Browser"
  shell: update-alternatives --set x-www-browser /usr/bin/google-chrome-stable
  sudo: true

- name: 'Allow suspend for admin user'
  lineinfile: line="%plugdev admin=NOPASSWD:/usr/sbin/pm-suspend" state=present validate='visudo -cf %s' dest=/etc/sudoers
  sudo: true

- name: "restart X"
  service: name=slim state=restarted
  sudo: true
